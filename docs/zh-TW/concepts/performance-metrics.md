# 績效指標與回測分析

## 概述

在編寫交易策略後，如何評估策略的優劣？不同的績效指標從不同角度反映了策略的表現。本頁面解釋了最重要的幾個指標，幫助你判斷一個策略是否值得交易。

---

## 為什麼需要了解這些指標？

一個看起來年化報酬 20% 的策略，可能在市場波動時虧損 50%，這種高風險的策略並不適合所有投資者。績效指標幫助你在「報酬」和「風險」之間取得平衡。

---

## 核心指標

### 報酬指標

#### 總報酬 (Total Return)

**定義**: 從策略開始到結束，投入的資金共增長了多少百分比。

**計算**: (最終資產 - 初始資產) / 初始資產

**解讀**:
- 20% 總報酬 = 初始 100 萬變成 120 萬
- 不考慮時間因素，只看絕對增長

#### 年化報酬 (Annualized Return)

**定義**: 將總報酬轉換為年均增長率，便於比較不同時間長度的策略。

**計算**: (1 + 總報酬) ^ (1 / 年數) - 1

**解讀**:
- 假設回測期 3 年，總報酬 30%，年化報酬 ≈ 9%
- 便於與市場基準指數對比

### 風險指標

#### 最大虧損 (Maximum Drawdown)

**定義**: 從峰值到谷值，策略資產曾經下跌的最大幅度。

**含義**:
- Max Drawdown -20% 意味著最糟糕的情況下，資產下跌了 20%
- 反映了策略的「最壞狀況」

**為什麼重要**:
- 幫助評估心理承受能力
- 一個年化 15% 但 Max Drawdown -50% 的策略可能不適合保守投資者

#### 波動率 (Volatility)

**定義**: 策略每日報酬的標準差，衡量回報的不穩定程度。

**解讀**:
- 波動率高 = 策略表現忽高忽低
- 波動率低 = 策略表現穩定

---

## 綜合評估：夏普比率

### 定義

**夏普比率 (Sharpe Ratio)** = (策略年化報酬 - 無風險報酬率) / 波動率

這個公式結合了「報酬」和「風險」，用一個單一的數字評估策略的效率。

### 解讀

| 夏普比率 | 評價 | 說明 |
|---------|------|------|
| < 0 | 很差 | 虧損 |
| 0 - 0.5 | 不佳 | 報酬不足以補償風險 |
| 0.5 - 1.0 | 一般 | 還不錯 |
| 1.0 - 2.0 | 優秀 | 報酬相對於風險是合理的 |
| > 2.0 | 傑出 | 非常穩定且高回報 |

### 為什麼使用夏普比率？

- **可比性**：不同策略的夏普比率可以直接比較
- **風險調整**：高報酬但高風險的策略不一定比低報酬低風險的策略更好

---

## 其他常見指標

### 勝率 (Win Rate)

**定義**: 正報酬日數 / 總交易日數

**解讀**:
- 50% 勝率 = 策略一半時間盈利，一半時間虧損
- 高勝率不一定意味著高利潤（可能很多小贏利但少數大虧損）

### 利潤因子 (Profit Factor)

**定義**: 總利潤 / 總虧損

**解讀**:
- 2.0 的利潤因子 = 每虧損 1 元，就賺 2 元
- > 1.5 算不錯

---

## 常見陷阱

### 過度擬合 (Overfitting)

在歷史數據上表現完美的策略，在真實交易中可能表現不佳。這是因為策略被「過度調整」到歷史數據的特性。

### 生存偏差 (Survivorship Bias)

只看還在交易的股票，忽視已經退市的公司，會高估策略的表現。

### 幸存者偏差 (Look-ahead Bias)

在回測中使用了「未來的信息」。例如，用今日收盤價判斷昨日是否應該買入，這在真實交易中是不可能的。

---

## 下一步

- → [如何運行一個完整的回測？](../tutorials/quick-demo.md)
- → [自訂績效分析報表](../how-to/visualization/pyfolio-tearsheet.md)

---

**最後更新**: 2025-11-07  
**版本**: 1.0  
**審查狀態**: 草稿
